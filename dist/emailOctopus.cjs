function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=/*#__PURE__*/t(require("axios"));function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r.apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function a(t,e,r){return a=s()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&i(o,r.prototype),o},a.apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,o(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)},u(t)}var c=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"Your API key is invalid.")||this).code="API_KEY_INVALID",r.message="Your API key is invalid.",r.message=e||"Your API key is invalid.",r.name="ApiKeyInvalidError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),l=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"Generic email octopus error")||this).code="EMAIL_OCTOPUS_ERROR",r.message="Generic email octopus error",r.message=e||"Generic email octopus error",r.name="EmailOctopusError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),f=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"Parameters are missing or invalid.")||this).code="INVALID_PARAMETERS",r.message="Parameters are missing or invalid.",r.message=e||"Parameters are missing or invalid.",r.name="InvalidParametersError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),d=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"A contact already exists with the supplied email address.")||this).code="MEMBER_EXISTS_WITH_EMAIL_ADDRESS",r.message="A contact already exists with the supplied email address.",r.message=e||"A contact already exists with the supplied email address.",r.name="MemberExistsWithEmailAddressError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),h=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"The requested endpoint does not exist.")||this).code="NOT_FOUND",r.message="The requested endpoint does not exist.",r.message=e||"The requested endpoint does not exist.",r.name="NotFoundError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),p=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"You're not authorised to perform that action.")||this).code="UNAUTHORISED",r.message="You're not authorised to perform that action.",r.message=e||"You're not authorised to perform that action.",r.name="UnauthorisedError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),m=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"An unknown error has occurred.")||this).code="UNKNOWN",r.message="An unknown error has occurred.",r.message=e||"An unknown error has occurred.",r.name="UnknownError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),v=function(t,e){if("INVALID_PARAMETERS"===e.code)throw new f(e.message);if("API_KEY_INVALID"===e.code)throw new c(e.message);if("UNAUTHORISED"===e.code)throw new p(e.message);if("NOT_FOUND"===e.code)throw new h(e.message);if("UNKNOWN"===e.code)throw new m(e.message)},E=function(t){return function(n){try{return Promise.resolve(function(o,i){try{var s=Promise.resolve(e.default.post("https://emailoctopus.com/api/1.6/lists/"+n.listId+"/contacts",r({api_key:t,email_address:n.emailAddress},n.fields&&{fields:n.fields},n.tags&&{tags:n.tags},n.status&&{status:n.status}))).then(function(t){return t.data})}catch(t){return i(t)}return s&&s.then?s.then(void 0,i):s}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;if("MEMBER_EXISTS_WITH_EMAIL_ADDRESS"===n.code)throw new d;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}},y=function(t){return function(r){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e.default.post("https://emailoctopus.com/api/1.6/lists",{api_key:t,name:r.name})).then(function(t){return t.data})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}};function g(t,e,r){if(!t.s){if(r instanceof w){if(!r.s)return void(r.o=g.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(g.bind(null,t,e),g.bind(null,t,2));t.s=e,t.v=r;const n=t.o;n&&n(t)}}var w=/*#__PURE__*/function(){function t(){}return t.prototype.then=function(e,r){var n=new t,o=this.s;if(o){var i=1&o?e:r;if(i){try{g(n,1,i(this.v))}catch(t){g(n,2,t)}return n}return this}return this.o=function(t){try{var o=t.v;1&t.s?g(n,1,e?e(o):o):r?g(n,1,r(o)):g(n,2,o)}catch(t){g(n,2,t)}},n},t}();function P(t){return t instanceof w&&1&t.s}var _=function(t){return function(r,n){try{var o=(null!=n&&n.autoPaginate?1:r.page)||1,i="next-initial",s=[],a=function(a,u){try{var c=function(){var a=function(t,e){var r;do{var n=t();if(n&&n.then){if(!P(n)){r=!0;break}n=n.v}var o=e();if(P(o)&&(o=o.v),!o)return n}while(!o.then);var i=new w,s=g.bind(null,i,2);return(r?n.then(a):o.then(u)).then(void 0,s),i;function a(r){for(n=r;P(o=e())&&(o=o.v),o;){if(o.then)return void o.then(u).then(void 0,s);if((n=t())&&n.then){if(!P(n))return void n.then(a).then(void 0,s);n=n.v}}g(i,1,n)}function u(r){if(r){do{if((n=t())&&n.then){if(!P(n))return void n.then(a).then(void 0,s);n=n.v}if(P(r=e())&&(r=r.v),!r)return void g(i,1,n)}while(!r.then);r.then(u).then(void 0,s)}else g(i,1,n)}}(function(){return Promise.resolve(e.default.get("https://emailoctopus.com/api/1.6/lists/"+r.listId+"/contacts",{params:{api_key:t,limit:r.limit||100,page:o}})).then(function(t){s.push.apply(s,t.data.data),null!=n&&n.autoPaginate?(o+=1,i=t.data.paging.next):i=null})},function(){return null!==i});if(a&&a.then)return a.then(function(){})}()}catch(t){return u(t)}return c&&c.then?c.then(void 0,u):c}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;v(0,n)}throw new l});return Promise.resolve(a&&a.then?a.then(function(t){return s}):s)}catch(t){return Promise.reject(t)}}},O=function(t){return function(r){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e.default.get("https://emailoctopus.com/api/1.6/lists",{params:{api_key:t,limit:r.limit||100,page:r.page||1}})).then(function(t){return t.data})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}},A=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"The list could not be found.")||this).code="LIST_NOT_FOUND",r.message="The list could not be found.",r.message=e||"The list could not be found.",r.name="ListNotFoundError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),b=function(t){return function(r){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e.default.get("https://emailoctopus.com/api/1.6/lists/"+r.listId,{params:{api_key:t}})).then(function(t){return t.data})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;if("LIST_NOT_FOUND"===n.code)throw new A;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}},I=/*#__PURE__*/function(t){function e(e){var r;return(r=t.call(this,e||"The contact could not be found.")||this).code="MEMBER_NOT_FOUND",r.message="The contact could not be found.",r.message=e||"The contact could not be found.",r.name="MemberNotFoundError",r}return n(e,t),e}(/*#__PURE__*/u(Error)),N=function(t){return function(r){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e.default.post("https://emailoctopus.com/api/1.6/lists/"+r.listId+"/contacts/"+r.memberId,{api_key:t})).then(function(){})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;if("MEMBER_NOT_FOUND"===n.code)throw new I;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}},x=function(t){return function(r){try{return Promise.resolve(function(n,o){try{var i=Promise.resolve(e.default.get("https://emailoctopus.com/api/1.6/lists/"+r.listId+"/contacts/"+r.memberId,{params:{api_key:t}})).then(function(t){return t.data})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}},T=function(t){return function(n){try{return Promise.resolve(function(o,i){try{var s=Promise.resolve(e.default.put("https://emailoctopus.com/api/1.6/lists/"+n.listId+"/contacts/"+n.memberId,r({api_key:t},n.emailAddress&&{email_address:n.emailAddress},n.fields&&{fields:n.fields},n.tags&&{tags:n.tags},n.status&&{status:n.status}))).then(function(t){return t.data})}catch(t){return i(t)}return s&&s.then?s.then(void 0,i):s}(0,function(t){if(e.default.isAxiosError(t)&&t.response){var r,n=null==(r=t.response)?void 0:r.data;if("MEMBER_NOT_FOUND"===n.code)throw new I;v(0,n)}throw new l}))}catch(t){return Promise.reject(t)}}};exports.ApiKeyInvalidError=c,exports.EmailOctopusError=l,exports.InvalidParametersError=f,exports.MemberExistsWithEmailAddressError=d,exports.NotFoundError=h,exports.UnauthorisedError=p,exports.emailOctopus=function(t){return{lists:{getList:b(t),getAllLists:O(t),createList:y(t),getAllContacts:_(t),getContactOfList:x(t),createContact:E(t),deleteContact:N(t),updateContactOfList:T(t)}}};
//# sourceMappingURL=emailOctopus.cjs.map
